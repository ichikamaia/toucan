# Repository Guidelines

## Project Structure & Module Organization
- `src/app` holds Next.js App Router routes, layouts, and pages.
- `src/components` contains shared UI and graph features; graph hooks live in `src/components/graph` and use a `use-` prefix.
- `src/lib` is for shared utilities and helpers.
- `public` stores static assets served as-is.
- `coverage/` is generated by `pnpm test:coverage`.

## Build, Test, and Development Commands
Use pnpm for all workflows (see `package.json`).
- `pnpm dev` – run the local Next.js dev server.
- `pnpm build` – create a production build.
- `pnpm start` – serve the built app.
- `pnpm lint` / `pnpm lint:fix` – run Biome checks (and auto-fix).
- `pnpm format` / `pnpm format:check` – apply or verify formatting.
- `pnpm typecheck` – run TypeScript without emitting files.
- `pnpm test` – run Vitest once (jsdom).
- `pnpm test:coverage` – generate coverage in `coverage/`.

## Coding Style & Naming Conventions
- TypeScript + React (`.ts`/`.tsx`) with Next.js conventions.
- Biome formatting rules: 2-space indent, semicolons as needed, organize imports.
- Prefer kebab-case filenames; hooks should be named `use-*.ts(x)`.
- UI primitives live in `src/components/ui`.

## Testing Guidelines
- Vitest is configured in `vitest.config.mts` with the jsdom environment.
- Tests live under `__tests__` directories and end with `.test.tsx`.
- Coverage targets `src/**/*.{ts,tsx}`; add or update tests for new behavior.

## Commit & Pull Request Guidelines
- Commit messages are short and direct, typically imperative or sentence case (see `git log`).
- PRs should include a summary, rationale for behavior changes, and tests run.
- Add screenshots or short recordings for UI changes when helpful.

## Configuration & Notes
- Build and styling tooling is configured in `next.config.ts`, `postcss.config.mjs`, and `components.json`.
- Repo notes live in `backend-info.md` and `cache-issue.md`; review when touching backend integration or caching.
